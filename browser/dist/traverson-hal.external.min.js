require=function e(r,n,t){function o(i,d){if(!n[i]){if(!r[i]){var s="function"==typeof require&&require;if(!d&&s)return s(i,!0);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[i]={exports:{}};r[i][0].call(l.exports,function(e){var n=r[i][1][e];return o(n||e)},l,l.exports,e,r,n,t)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(e,r,n){var t=e("./lib/parser"),o=e("./lib/resource"),a=!1;r.exports={parse:function(e){return(new t).parse(e,a)},enableValidation:function(e){a=null==e||e},disableValidation:function(){a=!1},Resource:o}},{"./lib/parser":3,"./lib/resource":4}],2:[function(e,r,n){"use strict";function t(){arguments.length>=1?this._array=arguments[0]:this._array=[]}t.prototype.array=function(){return this._array},t.prototype.isEmpty=function(e){return 0===this._array.length},t.prototype.push=function(e){var r=this._array.slice(0);return r.push(e),new t(r)},t.prototype.pop=function(){return new t(this._array.slice(0,this._array.length-1))},t.prototype.peek=function(){if(this.isEmpty())throw new Error("can't peek on empty stack");return this._array[this._array.length-1]},r.exports=t},{}],3:[function(e,r,n){"use strict";function t(){}function o(e,r,n){if(null==e)return e;var t=a(e._links,r,n.push("_links")),o=i(t),u=d(e._embedded,r,n.push("_embedded")),l=new v(t,o,u,r);return s(e,l),l._original=e,l}function a(e,r,n){return null!=(e=u(e,c,r,n))&&null!=e.self||h("Resource does not have a self link",r,n),e}function i(e){return e?e.curies:[]}function d(e,r,n){var t=u(e,f,r,n);return null==t?t:(Object.keys(t).forEach(function(e){t[e]=t[e].map(function(t){var a=o(t,null!=r?[]:null,n.push(e));return a._original=t,a})}),t)}function s(e,r){Object.keys(e).forEach(function(n){"_links"!==n&&"_embedded"!==n&&(r[n]=e[n])})}function u(e,r,n,t){if(null==e)return e;var o={};return Object.keys(e).forEach(function(a){o[a]=l(a,e[a],r,n,t)}),o}function l(e,r,n,t,o){return p(r)?r.map(function(r){return n(e,r,t,o)}):[n(e,r,t,o)]}function c(e,r,n,t){if(!y(r))throw new Error("Link object is not an actual object: "+r+" ["+typeof r+"]");var o=b(r);return Object.keys(_).forEach(function(r){null==o[r]&&(_[r].required&&h("Link misses required property "+r+".",n,t.push(e)),null!=_[r].defaultValue&&(o[r]=_[r].defaultValue))}),o.deprecation&&m("Warning: Link "+k(t.push(e))+" is deprecated, see "+o.deprecation),!0!==o.templated&&!1!==o.templated&&(o.templated=!1),n?(o.href&&o.href.indexOf("{")>=0&&!o.templated&&h('Link seems to be an URI template but its "templated" property is not set to true.',n,t.push(e)),o):o}function p(e){return"[object Array]"===Object.prototype.toString.call(e)}function y(e){return"object"==typeof e}function f(e,r){return r}function h(e,r,n){r&&r.push({path:k(n),message:e})}function m(e){"undefined"!=typeof console&&"function"==typeof console.log&&console.log(e)}function b(e){var r={};return Object.keys(e).forEach(function(n){r[n]=e[n]}),r}function k(e){for(var r="$.",n=0;n<e.array().length;n++)r+=e.array()[n]+".";return r=r.substring(0,r.length-1)}var v=e("./resource"),g=e("./immutable_stack"),_={href:{required:!0,defaultValue:null},templated:{required:!1,defaultValue:!1},type:{required:!1,defaultValue:null},deprecation:{required:!1,defaultValue:null},name:{required:!1,defaultValue:null},profile:{required:!1,defaultValue:null},title:{required:!1,defaultValue:null},hreflang:{required:!1,defaultValue:null}};t.prototype.parse=function(e,r){return o(e,r?[]:null,new g)},r.exports=t},{"./immutable_stack":2,"./resource":4}],4:[function(e,r,n){"use strict";function t(e,r,n,t){this._links=e||{},this._initCuries(r),this._embedded=n||{},this._validation=t||[]}function o(e,r){return null!=e?e[r]:null}function a(e,r,n){n=n||0;var t=o(e,r);return null!=t&&t.length>=1?t[n]:null}t.prototype._initCuries=function(e){if(this._curiesMap={},e){this._curies=e;for(var r=0;r<this._curies.length;r++){var n=this._curies[r];this._curiesMap[n.name]=n}}else this._curies=[];this._preResolveCuries()},t.prototype._preResolveCuries=function(){this._resolvedCuriesMap={};for(var e=0;e<this._curies.length;e++){var r=this._curies[e];if(r.name)for(var n in this._links)"curies"!==n&&this._preResolveCurie(r,n)}},t.prototype._preResolveCurie=function(e,r){this._links[r];var n=r.split(/:(.+)/),t=n[0];if(e.name===t)if(e.templated&&n.length>=1){var o=e.href.replace(/(.*){(.*)}(.*)/,"$1"+n[1]+"$3");this._resolvedCuriesMap[o]=r}else this._resolvedCuriesMap[e.href]=r},t.prototype.allLinkArrays=function(){return this._links},t.prototype.linkArray=function(e){return o(this._links,e)},t.prototype.link=function(e,r){return a(this._links,e,r)},t.prototype.hasCuries=function(e){return this._curies.length>0},t.prototype.curieArray=function(e){return this._curies},t.prototype.curie=function(e){return this._curiesMap[e]},t.prototype.reverseResolveCurie=function(e){return this._resolvedCuriesMap[e]},t.prototype.allEmbeddedResourceArrays=function(){return this._embedded},t.prototype.embeddedResourceArray=function(e){return o(this._embedded,e)},t.prototype.embeddedResource=function(e,r){return a(this._embedded,e,r)},t.prototype.original=function(){return this._original},t.prototype.validationIssues=function(){return this._validation},t.prototype.allLinks=t.prototype.allLinkArrays,t.prototype.allEmbeddedArrays=t.prototype.allEmbeddedResources=t.prototype.allEmbeddedResourceArrays,t.prototype.embeddedArray=t.prototype.embeddedResourceArray,t.prototype.embedded=t.prototype.embeddedResource,t.prototype.validation=t.prototype.validationIssues,r.exports=t},{}],"traverson-hal":[function(e,r,n){"use strict";function t(e){this.log=e}function o(e,r,n){var o;if(o=n||"all"===e.parsedKey.mode?e.embeddedStep||e.linkStep:e.linkStep||e.embeddedStep)return o;var a="Could not find a matching link nor an embedded document for "+r+".",i=t.errors.LinkError;throw e.linkError&&(a+=" Error while resolving linked documents: "+e.linkError,i=t.errors.LinkMissingOrInvalidError),e.embeddedError&&(a+=" Error while resolving embedded documents: "+e.embeddedError,e.linkError&&!n||(i=t.errors.EmbeddedDocumentsError)),a+=" Document: "+JSON.stringify(e.doc),m(a,i,e.doc)}function a(e){var r=e.match(/(.*)\[(.*):(.*)\]/);return r?{mode:"secondary",key:r[1],secondaryKey:r[2],secondaryValue:r[3],index:null}:(r=e.match(/(.*)\[(\d+)\]/))?{mode:"index",key:r[1],secondaryKey:null,secondaryValue:null,index:r[2]}:(r=e.match(/(.*)\[\$all\]/))?{mode:"all",key:r[1],secondaryKey:null,secondaryValue:null,index:null}:{mode:"first",key:e,secondaryKey:null,secondaryValue:null,index:null}}function i(e){e.halResource.hasCuries()&&(e.parsedKey.curie=e.halResource.reverseResolveCurie(e.parsedKey.key))}function d(e,r){var n=e.halResource.linkArray(e.parsedKey.key);if(n||(n=e.halResource.linkArray(e.parsedKey.curie)),n&&0!==n.length)switch(e.parsedKey.mode){case"secondary":s(e,n,r);break;case"index":u(e,n,r);break;case"first":l(e,n,r);break;case"all":break;default:throw m("Illegal mode: "+e.parsedKey.mode,t.errors.InvalidArgumentError)}}function s(e,r,n){for(var t=0;t<r.length;t++){var o=r[t][e.parsedKey.secondaryKey];if(null!=o&&o==e.parsedKey.secondaryValue)return r[t].href?(n.debug("found hal link: "+r[t].href),void(e.linkStep={url:r[t].href})):void(e.linkError="The link "+e.parsedKey.key+"["+e.parsedKey.secondaryKey+":"+e.parsedKey.secondaryValue+"] exists, but it has no href attribute.")}e.linkError=e.parsedKey.key+"["+e.parsedKey.secondaryKey+":"+e.parsedKey.secondaryValue+"] requested, but there is no such link."}function u(e,r,n){r[e.parsedKey.index]?r[e.parsedKey.index].href?(n.debug("found hal link: "+r[e.parsedKey.index].href),e.linkStep={url:r[e.parsedKey.index].href}):e.linkError="The link "+e.parsedKey.key+"["+e.parsedKey.index+"] exists, but it has no href attribute.":e.linkError="The link array "+e.parsedKey.key+" exists, but has no element at index "+e.parsedKey.index+"."}function l(e,r,n){for(var t,o=0;o<r.length;o++)if(r[o].href){t=r[o];break}t&&(r.length>1&&n.warn("Found HAL link array with more than one element for key "+e.parsedKey.key+", arbitrarily choosing index "+o+", because it was the first that had a href attribute."),n.debug("found hal link: "+t.href),e.linkStep={url:t.href})}function c(e,r){r.debug("checking for embedded: "+e.parsedKey.key+(e.parsedKey.index?e.parsedKey.index:""));var n=e.halResource.embeddedArray(e.parsedKey.key);if(n&&0!==n.length||"all"===e.parsedKey.mode)switch(r.debug("Found an array of embedded resource for: "+e.parsedKey.key),e.parsedKey.mode){case"secondary":p(e,n,r);break;case"index":y(e,n,r);break;case"all":f(e,n,r);break;case"first":h(e,n,r);break;default:throw m("Illegal mode: "+e.parsedKey.mode,t.errors.InvalidArgumentError)}}function p(e,r,n){for(var t=0;t<r.length;t++){var o=r[t][e.parsedKey.secondaryKey];if(null!=o&&o==e.parsedKey.secondaryValue)return n.debug("Found an embedded resource for: "+e.parsedKey.key+"["+e.parsedKey.secondaryKey+":"+e.parsedKey.secondaryValue+"]"),void(e.embeddedStep={doc:r[t].original()})}e.embeddedError=e.parsedKey.key+"["+e.parsedKey.secondaryKey+":"+e.parsedKey.secondaryValue+"] requested, but the embedded array "+e.parsedKey.key+" has no such element."}function y(e,r,n){r[e.parsedKey.index]?(n.debug("Found an embedded resource for: "+e.parsedKey.key+"["+e.parsedKey.index+"]"),e.embeddedStep={doc:r[e.parsedKey.index].original()}):e.embeddedError="The embedded array "+e.parsedKey.key+" exists, but has no element at index "+e.parsedKey.index+"."}function f(e,r,n){var t=e.halResource.original()._embedded&&e.halResource.original()._embedded[e.parsedKey.key];t?t instanceof Array||(t=[].concat(t)):t=[],e.embeddedStep={doc:t}}function h(e,r,n){r.length>1&&n.warn("Found HAL embedded resource array with more than one element  for key "+e.parsedKey.key+", arbitrarily choosing first element."),e.embeddedStep={doc:r[0].original()}}function m(e,r,n){var t=new Error(e);return t.name=r,n&&(t.data=n),t}var b=e("halfred");t.errors={InvalidArgumentError:"InvalidArgumentError",InvalidStateError:"InvalidStateError",LinkError:"HalLinkError",LinkMissingOrInvalidError:"HalLinkMissingOrInvalidError",EmbeddedDocumentsError:"HalEmbeddedDocumentsError"},t.mediaType="application/hal+json",t.prototype.findNextStep=function(e,r){if(void 0===r||null===r)throw m("Link object is null or undefined.",t.errors.InvalidArgumentError);if("object"!=typeof r)throw m("Links must be objects, not "+typeof r+": ",t.errors.InvalidArgumentError,r);if(!r.type)throw m("Link objects has no type attribute.",t.errors.InvalidArgumentError,r);switch(r.type){case"link-rel":return this._handleLinkRel(e,r);case"header":return this._handleHeader(e.lastStep.response,r);default:throw m("Link objects with type "+r.type+" are not supported by this adapter.",t.errors.InvalidArgumentError,r)}},t.prototype._handleLinkRel=function(e,r){var n=e.lastStep.doc,t=r.value;this.log.debug("parsing hal");var s={doc:n,halResource:b.parse(n),parsedKey:a(t),linkStep:null,embeddedStep:null};return i(s),d(s,this.log),c(s,this.log),o(s,t,e.preferEmbedded)},t.prototype._handleHeader=function(e,r){switch(r.value){case"location":var n=e.headers.location;if(!n)throw m("Following the location header but there was no location header in the last response.",t.errors.InvalidStateError);return{url:n};default:throw m("Link objects with type header and value "+r.value+" are not supported by this adapter.",t.errors.InvalidArgumentError,r)}},r.exports=t},{halfred:1}]},{},["traverson-hal"]);